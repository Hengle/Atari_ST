	OPT	O+,P+,A+
 	CLR.L	-(SP)
 	MOVE	#$20,-(SP)
 	TRAP	#1
 	ADDQ.L	#6,SP

	SUBA.L	A5,A5
	LEA	$FFFFFA01.W,A0
	MOVE.L	#$FF040000,D0
	MOVEP.L	D0,0(A0)
	MOVEQ	#0,D0
	MOVEP.L	D0,8(A0)
	MOVEQ	#$48,D0
	MOVEP.L	D0,$10(A0)

	MOVE.W	#$2300,SR
	LEA	$FFFF8800.W,A0
	MOVE.B	#7,(A0)
	MOVE.B	#$C0,2(A0)
	MOVE.B	#$E,(A0)
	MOVE.B	#9,2(A0)

	CLR.W	-(A7)
	PEA	NAME(PC)
	MOVE.W	#$3C,-(A7)
	TRAP	#1
	ADDQ.L	#8,A7

	MOVE.W	D0,D7
	
	MOVE.L	MODIF,A6
	LEA	PROVIZOIR,A4
	MOVEQ	#17-1,D0
SAV	MOVE	(A6)+,(A4)+
	DBF	D0,SAV

	LEA	-34(A6),A6
	LEA	PALETTE,A4
	CLR	(A6)+
	REPT	8
	MOVE.L	(A4)+,(A6)+
	ENDR
	
MODIF	EQU	*+2
	OPT	O-,A-,P-
	PEA	$78000
	OPT	O+,A+,P+
	MOVE.L	#32066,-(SP)
	MOVE.W	D7,-(A7)
	MOVE.W	#$40,-(A7)
	TRAP	#1
	LEA	$C(A7),A7

	MOVE.W	D7,-(A7)
	MOVE.W	#$3E,-(A7)
	TRAP	#1
	ADDQ.L	#4,A7

	MOVEQ	#$7C,D0
LAB	STOP	#$2300
	DBF	D0,LAB

	MOVE.L	MODIF,A6
	LEA	PROVIZOIR,A4
	MOVEQ	#17-1,D0
SAV2	MOVE	(A4)+,(A6)+
	DBF	D0,SAV2

	LEA	TABL_NAM,A6
	OPT	O-
MODTN	EQU	*+2
	LEA	0(A6),A6
	OPT	O+
	TST.L	(A6)
	BEQ.S	.RESET
	LEA	MODTN,A4
	ADD	#14,(A4)
	LEA	NAME,A4
	REPT	14
	MOVE.B	(A6)+,(A4)+
	ENDR
	CLR.L	-(SP)
	TRAP	#1
	
.RESET	CLR.L	$42A.W
	CLR.L	$426.W
	MOVE.L	4.W,A0
	JMP	(A0)
PALETTE
PROVIZOIR	DS.B	34
NAME	DC.B	'_______1.PI1',0,0
	EVEN
TABL_NAM	DC.B	'_______2.PI1',0,0
	DC.B	'_______3.PI1',0,0
	DC.B	'_______4.PI1',0,0
	DC.B	'_______5.PI1',0,0
	DC.B	'_______6.PI1',0,0
	DC.B	'_______7.PI1',0,0
	DC.B	'_______8.PI1',0,0
	DC.B	'_______9.PI1',0,0
	DC.B	0,0,0,0,0,0
	EVEN

