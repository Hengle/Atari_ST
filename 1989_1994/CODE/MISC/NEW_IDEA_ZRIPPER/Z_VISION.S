;
; Z-VISION  -- V1.1 -- Pour BMP 448*480 256 couleurs UNIQUEMENT.
;

OFF7_X	EQU	16
OFF7_Y	EQU	20
OFF7_PAL	EQU	54
OFF7_DATAS	EQU	1078

	CLR.L	-(SP)
	MOVE	#$20,-(SP)
	TRAP	#1
	ADDQ	#6,SP

	MOVE.L	#BUF_ECR,D0
	CLR.B	D0
	MOVE.L	D0,SCREEN1
	ADD.L	#432*256,D0
	MOVE.L	D0,SCREEN2
	
	MOVE.L	SCREEN1,A0
	MOVE	#3456-1,D0
EFF_ECR	CLR.L	(A0)+	
	CLR.L	(A0)+	
	CLR.L	(A0)+
	DBF	D0,EFF_ECR

	move.l	SCREEN1,d0
	lsr.l	#8,d0
	move.l	#$ffff8201,a0
	movep	d0,(a0)

	LEA	TABLE_RT,A1
	MOVEQ	#0,D5
	MOVE.L	SCREEN1,A3
	LEA	1600(A3),A3
	MOVE.L	SCREEN2,A4
	LEA	1600(A4),A4
	MOVE.L	A3,A5
	ADDA.L	#230*479,A5

	MOVE	#%1000000000000000,D1
	MOVEM.L	D0-A6,SAVER
***
	LEA	BMP+OFF7_PAL,A0
	LEA	PALETTE,A1
	MOVE	#256-1,D7
CREE_PALETTE	MOVEQ	#0,D4
	MOVEQ	#0,D0
	MOVEQ	#0,D1
	MOVEQ	#0,D2
;ATTENTION! C'EST PAS  R-V-B mais B-V-R....
	MOVE.B	(A0)+,D0	Composante Bleue
	MOVE.B	(A0)+,D1	Verte
	MOVE.B	(A0)+,D2	Rouge
	MOVE.B	(A0)+,D3	Inutilis‚e
	LSR.B	#4,D0
	LSR.B	#4,D1
	LSR.B	#4,D2
	;%0000011101110111 = $777
	;%0000111111111111 = $FFF
	MOVEQ	#0,D3
	MOVE.B	D0,D3	Bleu
	LSL	#4,D1
	OR	D1,D3	+Vert
	MOVE.B	D2,(A1)+	+Rouge
	MOVE.B	D3,(A1)+
	DBF	D7,CREE_PALETTE

ONCE_MORE	ADDQ	#1,$FFFF8240.W
	CMPI.B	#$39,$FFFFFC02.W
	BNE.S	.NOKEY
	JMP	DEBUT
.NOKEY
	LEA	BMP+OFF7_DATAS,A0
MODIF1	EQU	*+2
	ADDA.L	#448*479,A0
	MOVE.L	SCREEN1,A1

	LEA	MINI_TABLO,A2
	MOVE	#64-1,D0
.EFF_MINI	CLR.L	(A2)+
	DBF	D0,.EFF_MINI
	LEA	MINI_TABLO,A2
	MOVEQ	#0,D0
	MOVEQ	#1,D1
	MOVE	#448-1,D2
.SCAN_ONE_LINE	MOVE.B	(A0)+,D0
	ADD.B	D1,(A2,D0.W)
	DBF	D2,.SCAN_ONE_LINE
;ici: pour chaque couleur on a le nb de pixels correspondant pour la
;     ligne en cours.

	LEA	MOST_OFTEN,A0
	MOVEQ	#16-1,D5
.SIXTEEN_TO_DO	LEA	MINI_TABLO,A2
	MOVEQ	#0,D0	D0=MAX
	MOVEQ	#0,D7	D7=NUMERO COLOR
	MOVE	#256-1,D6
.FREQUENCE	MOVE.B	(A2)+,D1
	CMP.B	D0,D1
	BLE.S	.LOWER
	MOVE.B	D1,D0
	MOVE.B	D7,(A0)
	LEA	-1(A2),A3
.LOWER	ADDQ.B	#1,D7
	DBF	D6,.FREQUENCE
	CLR.B	(A3)
	ADDQ	#1,A0
	DBF	D5,.SIXTEEN_TO_DO
;ici: on repŠre les 16 couleurs les plus utilis‚es dans la ligne.

;Les choses s‚rieuses commencent maintenant. C'est parti.........

	LEA	PALETTE,A0
	LEA	MOST_OFTEN,A1
	LEA	PALETTES,A2
MODIF3	EQU	*+2
	ADDA.L	#0,A2
	MOVEQ	#15,D1
.PAL0	MOVEQ	#0,D0
	MOVE.B	(A1)+,D0
	ADD	D0,D0
	MOVE	(A0,D0.W),(A2)+
	DBF	D1,.PAL0
	
	LEA	BMP+OFF7_DATAS,A0
MODIF2	EQU	*+2
	ADDA.L	#448*479,A0
	MOVE.L	SCREEN1,A1
	LEA	MOST_OFTEN,A2
	LEA	TABLO_DIFRENZ,A3
	LEA	PALETTE,A4

	MOVE	#448-1,D7
AGAIN	MOVEM.L	A0/D7,-(SP)

	MOVEQ	#0,D5
	MOVE.B	(A0)+,D5
	MOVE	D5,D0
	ADD	D0,D0
	MOVE	(A4,D0.W),D2

	MOVEQ	#15,D4
.DO_IT	MOVEQ	#0,D1
	MOVE.B	(A2)+,D1
	CMP.B	D5,D1
	BEQ	LA_MEME
	ADD	D1,D1
	MOVE	(A4,D1.W),D3
	SUB	D2,D3
	MOVE	D3,(A3)+
	DBF	D4,.DO_IT
PART1
	LEA	TABLO_DIFRENZ,A3
	MOVEQ	#0,D6
	MOVEQ	#0,D7
	MOVE	#$FFF,D5
	MOVEQ	#15,D3
.SIXT	MOVE	(A3)+,D4
	BLT.S	.SUIT
	CMP	D4,D5
	BLE.S	.SUIT
	MOVE	D4,D5
	MOVE	D7,D6
	MOVE	#$FFF,-2(A3)
.SUIT	ADDQ	#1,D7
	DBF	D3,.SIXT
;ici: D6=numero en octet du min des (+)
PART2
	LEA	TABLO_DIFRENZ,A3
	MOVEQ	#0,D7
	MOVE	#-$FFF,D5
	MOVEQ	#15,D3
.SIXT	MOVE	(A3)+,D4
	BGT.S	.SUIT
	CMP	D4,D5
	BGE.S	.SUIT
	MOVE	D4,D5
	MOVE	D7,D2
	MOVE	#-$FFF,-2(A3)
.SUIT	ADDQ	#1,D7
	DBF	D3,.SIXT
;ici: D2=numero en octet du max des (-)
	BRA.S	PUT_PIXEL
LA_MEME	MOVEQ	#0,D6
	MOVEQ	#0,D2
	MOVE	D1,D6
	MOVE	D1,D2
****
PUT_PIXEL	;D2 ET D6 CONTIENNENT LES NUMEROS DES COULEURS
	MOVEM.L	D2/D6,-(SP)
	MOVEM.L	SAVER,D0-A6
	MOVEM.L	(SP)+,D2/D6

	ADD	D2,D2
	ADD	D2,D2
	LEA	(A1,D2.W),A2
	MOVE.L	(A2),A2
	JSR	(A2)

	EXG.L	A3,A4
	ADD	D6,D6
	ADD	D6,D6
	LEA	(A1,D6.W),A2
	MOVE.L	(A2),A2
	JSR	(A2)

;	EXG.L	A3,A4

	LSR	#1,D1
	BNE.S	.NEXT_PIXEL
	MOVE	#%1000000000000000,D1
	ADDQ	#8,A3
	ADDQ	#8,A4

	ADDQ	#8,D5
	CMPI	#224,D5
	BNE.S	.ROOL
**
	MOVEQ	#0,D5
	LEA	-448*2(A0),A0
	ADDQ	#6,A3
	ADDQ	#6,A4
	EXG.L	A3,A4
.ROOL
	CMP.L	A4,A5
	BNE.S	.NEXT_PIXEL
	MOVE	#$001,$FFFF8240.W
	JMP	DEBUT
.NEXT_PIXEL	MOVEM.L	D0-A6,SAVER
	MOVEM.L	(SP)+,A0/D7
	DBF	D7,AGAIN
	SUB.L	#448,MODIF1
	SUB.L	#448,MODIF2
	ADD.L	#32,MODIF3
	JMP	ONCE_MORE

RT_0	OR	D1,(A3)	0001
RT_00	RTS
RT_1	OR	D1,2(A3)	0010
	RTS
RT_2	OR	D1,(A3)	0011
	OR	D1,2(A3)
	RTS
RT_3	OR	D1,4(A3)	0100
	RTS
RT_4	OR	D1,4(A3)	0101
	OR	D1,(A3)
	RTS
RT_5	OR	D1,4(A3)	0110
	OR	D1,2(A3)
	RTS
RT_6	OR	D1,4(A3)	0111
	OR	D1,2(A3)
	OR	D1,(A3)
	RTS
RT_7	OR	D1,6(A3)	1000
	RTS
RT_8	OR	D1,6(A3)	1001
	OR	D1,(A3)
	RTS
RT_9	OR	D1,6(A3)	1010
	OR	D1,2(A3)
	RTS
RT_10	OR	D1,6(A3)	1011
	OR	D1,2(A3)
	OR	D1,(A3)
	RTS
RT_11	OR	D1,6(A3)	1100
	OR	D1,4(A3)
	RTS
RT_12	OR	D1,6(A3)	1101
	OR	D1,4(A3)
	OR	D1,(A3)
	RTS
RT_13	OR	D1,6(A3)	1110
	OR	D1,4(A3)
	OR	D1,2(A3)
	RTS
RT_14	OR	D1,6(A3)	1111
	OR	D1,4(A3)
	OR	D1,2(A3)
	OR	D1,(A3)
	RTS

MINI_TABLO	DS.B	256
MOST_OFTEN	DS.B	16
TABLO_DIFRENZ	DS.W	16
SAVER	DS.L	16
	EVEN

*************
*************
*************
;	TST.L	$5A0.W
;	BNE.S	STE
;	MOVEM.L	PALET_STF,D0-D7
;	MOVEM.L	D0-D7,PALETTE
;	BRA.S	FINI1
;STE	MOVEM.L	PALET_STE,D0-D7
;	MOVEM.L	D0-D7,PALETTE
FINI1	NOP
**********************************************************************
DEBUT:
	LEA	DATA_HS,A0
	MOVE.L	A0,POIT

	MOVE.L	#FIN,$008.W
	MOVE.L	#FIN,$00C.W
	MOVE.L	#FIN,$010.W
	MOVE.L	#FIN,$014.W

	MOVE.L	#INTER_RTE,$68.W
	CLR.B	$FFFFFA07.W
	CLR.B	$FFFFFA09.W
	CLR.B	$FFFFFA13.W
	CLR.B	$FFFFFA15.W

	MOVE.L	#VBLR_IR,$70.W
	MOVE.L	#TB0_IR,$120.W

	MOVE.B	#$12,$FFFFFC02.W

	CLR.B	$FFFFFA1B.W
	BSET	#0,$FFFFFA07.W
	BSET	#0,$FFFFFA13.W

BOUCLE	BRA.S	BOUCLE

VBLR_IR
	CLR.B	$FFFFFA1B.W
	MOVEQ	#0,D0
	MOVEQ	#0,D1
	MOVEQ	#0,D2
	MOVEQ	#0,D3
	MOVEQ	#0,D4
	MOVEQ	#0,D5
	MOVEQ	#0,D6
	MOVEQ	#0,D7
	MOVEM.L	D0-D7,$FFFF8240.W

	MOVE.B	#0,$FFFFFA19.W
	MOVE.B	#99,$FFFFFA1F.W		; BORDER HAUT
	MOVE.B	#4,$FFFFFA19.W
	BCLR	#3,$FFFFFA17.W
	MOVE.L	#INTER_TMA,$134.W
	ORI.B	#$20,$FFFFFA13.W
	ORI.B	#$20,$FFFFFA07.W
	
	LEA	PALETTES,A0
MODPAL	EQU	*+2
	ADDA.L	#0,A0
INTER_RTE	RTE
PALET_STF
	DC	$000,$001,$111,$212,$222,$323,$333,$434
	DC	$444,$545,$555,$656,$666,$767,$777,$777
PALET_STE
	DC	$000,$888,$111,$999,$222,$AAA,$333,$BBB
	DC	$444,$CCC,$555,$DDD,$666,$EEE,$777,$FFF

INTER_TMA:	CLR.B	$FFFFFA07.W
	CLR.B	$FFFFFA09.W
	MOVE	#$2100,SR
full
	LEA	$FFFF8209,A3
	LEA	$FFFF8260,A6
	LEA	$FFFF820A,A5

	MOVEQ	#0,D0
	MOVEQ	#2,D1

	STOP	#$2100
	MOVE	#$2700,SR
	MOVE	#$2300,(SP)

	MOVEQ	#29,D2
SYNCHROA:	DBF	D2,SYNCHROA
	NOP

	MOVE.B	D0,(A5)
	REPT	6
	NOP
	ENDR
	MOVE.B	D1,(A5)

*******

	MOVEA.L	POIT,A2

	MOVE.L	#$FFFF8209,A6
	MOVE.L	#$FFFF8260,A4
	MOVE.L	#$FFFF820A,A3
	MOVEQ	#0,D1		
	MOVEQ	#$10,D6
	MOVE.L	#228-12+2-1-1-1,D0

SYNCHRO	MOVE.B	(A6),D7
	BEQ.S	SYNCHRO
	SUB.W	D7,D6		
	LSL.W	D6,D1		
	DCB	97-3-4,$4E71

	REPT	9
	MOVE.L	(A2)+,A1	*3
	JSR	(A1)	*4
	ENDR
	
	DCB	7-1-2,$4E71
	MOVEQ	#42-1,D1
	LEA	$FFFF8240.W,A5

	;MOVEM.L	D0-D7,(A0)	18
	;MOVEM.L	(A0)+,D0-D7	19
	;MOVEM.L	(A0)+,D0-D4	13
	;MOVEM.L	(A0)+,D0-D3	11
	;MOVEM.L	D0-D4,(A0)	12
	;MOVEM.L	D0-D3,(A0)	10

	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	MOVEM.L	(A0)+,D2-D7/A1-A2
	MOVEM.L	D2-D7/A1-A2,(A5)
	DCB	88-19-18-19,$4E71
	MOVEM.L	(A0)+,D2-D7/A1-A2
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	DCB	12,$4E71

	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	MOVEM.L	D2-D7/A1-A2,(A5)
	MOVEM.L	(A0)+,D2-D7/A1-A2
	DCB	88-19-18,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	DCB	12-1,$4E71

FULLSCREEN	NOP
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	MOVEM.L	D2-D7/A1-A2,(A5)
	MOVEM.L	(A0)+,D2-D7/A1-A2
	DCB	88-19-18,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	DCB	12-4,$4E71
	DBF	D0,FULLSCREEN

	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	MOVEM.L	D2-D7/A1-A2,(A5)
	MOVEM.L	(A0)+,D2-D7/A1-A2
	DCB	88-19-18,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	;	ICI=116	NOPS

	CLR.B	$FFFF820A.W 
	DCB	8,$4E71

	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	MOVE	A4,(A3)
	MOVEM.L	D2-D7/A1-A2,(A5)
	MOVEM.L	(A0)+,D2-D7/A1-A2
	DCB	88-2-19-18,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	DCB	12-1,$4E71
	
.F	NOP
	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	MOVEM.L	D2-D7/A1-A2,(A5)
	MOVEM.L	(A0)+,D2-D7/A1-A2
	DCB	88-19-18,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	DCB	12-4,$4E71
	DBF	D1,.F
SUITE
	CMPI.B	#$50,$FFFFFC02.W
	BNE.S	PAS_HAUT
	CMPI.L	#230*400,Y_VALUE
	BEQ.S	PAS_HAUT
	ADD.L	#230,Y_VALUE
	ADD.L	#32,MODPAL
PAS_HAUT	CMPI.B	#$48,$FFFFFC02.W
	BNE.S	PAS_BAS
	TST.L	Y_VALUE
	BEQ.S	PAS_BAS
	SUB.L	#230,Y_VALUE
	SUB.L	#32,MODPAL
PAS_BAS
	CMPI.B	#$4B,$FFFFFC02.W
	BNE.S	PAS_GA
	ADDQ.L	#8,Y_VALUE
PAS_GA	CMPI.B	#$4D,$FFFFFC02.W
	BNE.S	PAS_DR
	SUBQ.L	#8,Y_VALUE
PAS_DR
	MOVEQ	#0,D0	
	MOVEQ	#0,D1
	MOVE.L	Y_VALUE,D0
	
	LSR.L	#8,D0
	MOVE.L	D0,D1
	LSL.L	#8,D1

	MOVE.L	Y_VALUE,D0
	SUB.L	D1,D0

	LEA	DATA_HS,A0

	TST.L	D0
	BNE.S	DEJ
	LEA	RIEN,A0
	MOVE.L	A0,POIT
	BRA.S	OKAY
DEJ	SUBQ.L	#2,D0
	MULU	#18,D0
	ADDA.L	D0,A0
	MOVE.L	A0,POIT

OKAY
;	move.l	SCREEN1,d0
;	move.l	SCREEN2,SCREEN1		
;	move.l	d0,SCREEN2

	move.l	SCREEN1,d0
	ADD.L	D1,D0
	lsr.l	#8,d0
	LEA	$FFFF8201.W,A0
	movep	d0,(a0)

	RTE
Y_VALUE	DC.L	0

TB0_IR	RTE

FIN:	MOVE.L	4.W,A0
	JMP	(A0)

H0
	DCB	128-4-3-4,$4E71
	RTS

H70
	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	DCB	3+17*5,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	NOP
	RTS	=4 NOPS
H44
	DCB	3+18*5,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	NOP
	RTS	=4 NOPS
H24
	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	DCB	1+17*5,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	REPT	3
	NOP
	ENDR
	RTS	=4 NOPS
H2
	NOP
	DCB	18*5,$4E71
	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	REPT	3
	NOP
	ENDR
	RTS	=4 NOPS
H80
	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	DCB	7*5,$4E71
	MOVE	A4,(A4)
	MOVE.B	#0,(A4)
	DCB	3+9*5,$4E71

	MOVE.b	#0,(A3)
	MOVE	a4,(A3)
	DCB	13,$4E71
	MOVE	a4,(A4)
	MOVE.B	#0,(A4)
	NOP
	RTS
	 
	DATA
DATA_HS
 DC.L H44,H44,H2,H2,H2,H80,H0,H0,H0
 DC.L H44,H44,H2,H2,H80,H0,H0,H0,H0
 DC.L H44,H44,H2,H80,H0,H0,H0,H0,H0
 DC.L H44,H44,H80,H0,H0,H0,H0,H0,H0
 DC.L H44,H24,H24,H2,H80,H0,H0,H0,H0
 DC.L H44,H24,H24,H80,H0,H0,H0,H0,H0
 DC.L H24,H2,H2,H2,H2,H2,H0,H0,H0
 DC.L H24,H2,H2,H2,H2,H0,H0,H0,H0
 DC.L H24,H2,H2,H2,H0,H0,H0,H0,H0
 DC.L H24,H2,H2,H0,H0,H0,H0,H0,H0
 DC.L H24,H2,H0,H0,H0,H0,H0,H0,H0
 DC.L H24,H0,H0,H0,H0,H0,H0,H0,H0
 DC.L H70,H44,H24,H24,H24,H80,H80,H0,H0
 DC.L H70,H44,H2,H2,H2,H80,H0,H0,H0
 DC.L H70,H44,H2,H2,H80,H0,H0,H0,H0
 DC.L H70,H44,H2,H80,H0,H0,H0,H0,H0
 DC.L H44,H2,H2,H2,H2,H2,H0,H0,H0
 DC.L H44,H2,H2,H2,H2,H0,H0,H0,H0
 DC.L H44,H2,H2,H2,H0,H0,H0,H0,H0
 DC.L H44,H2,H2,H0,H0,H0,H0,H0,H0
 DC.L H44,H2,H0,H0,H0,H0,H0,H0,H0
 DC.L H44,H0,H0,H0,H0,H0,H0,H0,H0
 DC.L H24,H24,H2,H0,H0,H0,H0,H0,H0
 DC.L H24,H24,H0,H0,H0,H0,H0,H0,H0
 DC.L H44,H44,H44,H2,H80,H0,H0,H0,H0
 DC.L H44,H44,H44,H80,H0,H0,H0,H0,H0
 DC.L H70,H70,H2,H2,H2,H80,H0,H0,H0
 DC.L H70,H70,H2,H2,H80,H0,H0,H0,H0
 DC.L H70,H70,H2,H80,H0,H0,H0,H0,H0
 DC.L H44,H24,H2,H2,H2,H2,H0,H0,H0
 DC.L H44,H24,H2,H2,H2,H0,H0,H0,H0
 DC.L H44,H24,H2,H2,H0,H0,H0,H0,H0
 DC.L H44,H24,H2,H0,H0,H0,H0,H0,H0
 DC.L H44,H24,H0,H0,H0,H0,H0,H0,H0
 DC.L H70,H0,H0,H0,H0,H0,H0,H0,H0
 DC.L H24,H24,H24,H0,H0,H0,H0,H0,H0
 DC.L H70,H44,H44,H2,H2,H80,H0,H0,H0
 DC.L H70,H44,H44,H2,H80,H0,H0,H0,H0
 DC.L H70,H44,H44,H80,H0,H0,H0,H0,H0
 DC.L H44,H24,H24,H2,H80,H70,H0,H0,H0
 DC.L H70,H44,H24,H24,H80,H0,H0,H0,H0
 DC.L H44,H44,H2,H2,H0,H0,H0,H0,H0
 DC.L H44,H44,H2,H0,H0,H0,H0,H0,H0
 DC.L H44,H44,H0,H0,H0,H0,H0,H0,H0
 DC.L H70,H24,H2,H2,H0,H0,H0,H0,H0
 DC.L H70,H24,H2,H0,H0,H0,H0,H0,H0
 DC.L H70,H24,H0,H0,H0,H0,H0,H0,H0
 DC.L H24,H24,H24,H24,H0,H0,H0,H0,H0
 DC.L H70,H70,H44,H2,H2,H2,H80,H0,H0
 DC.L H70,H70,H44,H2,H2,H80,H0,H0,H0
 DC.L H70,H70,H44,H2,H80,H0,H0,H0,H0
 DC.L H70,H44,H2,H2,H2,H2,H2,H0,H0
 DC.L H70,H44,H2,H2,H2,H2,H0,H0,H0
 DC.L H70,H44,H2,H2,H2,H0,H0,H0,H0
 DC.L H70,H44,H2,H2,H0,H0,H0,H0,H0
 DC.L H70,H44,H2,H0,H0,H0,H0,H0,H0
 DC.L H70,H44,H0,H0,H0,H0,H0,H0,H0
 DC.L H24,H24,H24,H24,H24,H2,H2,H0,H0
 DC.L H24,H24,H24,H24,H24,H2,H0,H0,H0
 DC.L H24,H24,H24,H24,H24,H0,H0,H0,H0
 DC.L H70,H44,H44,H44,H80,H0,H0,H0,H0
 DC.L H70,H70,H70,H2,H2,H2,H80,H0,H0
 DC.L H70,H70,H70,H2,H2,H80,H0,H0,H0
 DC.L H70,H70,H70,H2,H80,H0,H0,H0,H0
 DC.L H70,H44,H24,H2,H2,H2,H2,H0,H0
 DC.L H44,H44,H44,H0,H0,H0,H0,H0,H0
 DC.L H70,H44,H24,H2,H2,H0,H0,H0,H0
 DC.L H70,H44,H24,H2,H0,H0,H0,H0,H0
 DC.L H70,H44,H24,H0,H0,H0,H0,H0,H0
 DC.L H70,H70,H0,H0,H0,H0,H0,H0,H0
 DC.L H24,H24,H24,H70,H0,H0,H0,H0,H0
 DC.L H70,H70,H44,H44,H2,H2,H80,H0,H0
 DC.L H70,H70,H44,H44,H2,H80,H0,H0,H0
 DC.L H70,H70,H44,H44,H80,H0,H0,H0,H0
 DC.L H70,H70,H44,H24,H24,H2,H80,H0,H0
 DC.L H70,H44,H44,H2,H2,H2,H0,H0,H0
 DC.L H70,H44,H44,H2,H2,H0,H0,H0,H0
 DC.L H70,H44,H44,H2,H0,H0,H0,H0,H0
 DC.L H70,H44,H44,H0,H0,H0,H0,H0,H0
 DC.L H70,H70,H24,H2,H2,H0,H0,H0,H0
 DC.L H70,H70,H24,H2,H0,H0,H0,H0,H0
 DC.L H70,H70,H24,H0,H0,H0,H0,H0,H0
 DC.L H70,H24,H24,H24,H24,H0,H0,H0,H0
 DC.L H24,H24,H24,H24,H24,H24,H24,H0,H0
 DC.L H70,H70,H70,H44,H2,H2,H80,H0,H0
 DC.L H44,H44,H44,H44,H2,H2,H0,H0,H0
 DC.L H44,H44,H44,H44,H2,H0,H0,H0,H0
 DC.L H44,H44,H44,H44,H0,H0,H0,H0,H0
 DC.L H70,H70,H44,H2,H2,H2,H0,H0,H0
 DC.L H70,H70,H44,H2,H2,H0,H0,H0,H0
 DC.L H70,H70,H44,H2,H0,H0,H0,H0,H0
 DC.L H70,H70,H44,H0,H0,H0,H0,H0,H0
 DC.L H70,H44,H24,H24,H24,H0,H0,H0,H0
 DC.L H70,H70,H24,H24,H0,H0,H0,H0,H0
 DC.L H70,H70,H44,H44,H44,H80,H2,H0,H0
 DC.L H70,H70,H44,H44,H44,H80,H0,H0,H0
 DC.L H70,H70,H70,H44,H24,H2,H2,H80,H0
 DC.L H44,H44,H44,H44,H24,H2,H2,H0,H0
 DC.L H44,H44,H44,H44,H24,H2,H0,H0,H0
 DC.L H44,H44,H44,H44,H24,H0,H0,H0,H0
 DC.L H70,H44,H44,H44,H0,H0,H0,H0,H0
 DC.L H70,H70,H70,H2,H2,H2,H0,H0,H0
 DC.L H70,H70,H70,H2,H2,H0,H0,H0,H0
 DC.L H70,H70,H70,H2,H0,H0,H0,H0,H0
 DC.L H70,H70,H70,H0,H0,H0,H0,H0,H0
 DC.L H24,H70,H70,H24,H24,H0,H0,H0,H0
 DC.L H70,H24,H24,H24,H24,H24,H24,H0,H0
 DC.L H44,H44,H44,H44,H44,H2,H2,H0,H0
 DC.L H44,H44,H44,H44,H44,H2,H0,H0,H0
 DC.L H44,H44,H44,H44,H44,H0,H0,H0,H0
 DC.L H70,H70,H44,H44,H2,H2,H2,H0,H0
 DC.L H70,H70,H44,H44,H2,H2,H0,H0,H0
 DC.L H70,H70,H44,H44,H2,H0,H0,H0,H0
 DC.L H70,H70,H44,H44,H0,H0,H0,H0,H0
 DC.L H70,H44,H44,H24,H24,H24,H0,H0,H0
 DC.L H70,H70,H70,H24,H2,H0,H0,H0,H0
 DC.L H70,H70,H70,H24,H0,H0,H0,H0,H0
 DC.L H24,H24,H24,H24,H70,H70,H0,H0,H0
 DC.L H44,H44,H44,H44,H44,H24,H2,H2,H2
 DC.L H44,H44,H44,H44,H44,H24,H2,H2,H0
 DC.L H70,H44,H44,H44,H44,H2,H2,H0,H0
 DC.L H70,H44,H44,H44,H44,H2,H0,H0,H0
 DC.L H70,H44,H44,H44,H44,H0,H0,H0,H0
 DC.L H70,H44,H44,H44,H24,H24,H2,H0,H0
 DC.L H70,H70,H70,H44,H2,H2,H0,H0,H0
 DC.L H70,H70,H70,H44,H2,H0,H0,H0,H0
 DC.L H70,H70,H70,H44,H0,H0,H0,H0,H0

RIEN	REPT	9
	DC.L	H0
	ENDR

	DS.B	256
BMP	INCBIN	TEST2.BMP

	DC.L	RT_00
TABLE_RT
	DC.L	RT_00
	DC.L	RT_0
	DC.L	RT_1
	DC.L	RT_2
	DC.L	RT_3
	DC.L	RT_4
	DC.L	RT_5
	DC.L	RT_6
	DC.L	RT_7
	DC.L	RT_8
	DC.L	RT_9
	DC.L	RT_10
	DC.L	RT_11
	DC.L	RT_12
	DC.L	RT_13
	DC.L	RT_14
	;DC.L	RT_14

	SECTION	BSS
PALETTE	DS.B	2*256
POIT	DS.L	1
SCREEN1	DS.L	1
SCREEN2	DS.L	1
	DS.B	256
BUF_ECR	DS.B	432*256*2
PALETTES	DS.B	32*480.L H70,H70,H24,H2,H2,H0,H0,H0,H0
 DC.L H70,H70,H