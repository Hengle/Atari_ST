	CLR.L	-(SP)
	MOVE	#$20,-(SP)
	TRAP	#1
	ADDQ.L	#6,SP

	CLR	-(SP)
	MOVE.L	#-1,-(SP)
	MOVE.L	#-1,-(SP)
	MOVE	#5,-(SP)
	TRAP	#14
	ADDA.L	#12,SP

	CLR.L	D0
	CLR	CNT
	
	LEA	DATA+34,A0
	LEA	BUFFER,A1
LABEL1	CMPI	#$7D00,CNT
	BEQ.S	FINI
	MOVE.L	(A0)+,D0
	SWAP	D0
	CMPI	#0,D0
	BEQ.S	RIEN
	CMPI	#$FFFF,D0
	BEQ.S	MOVE
OR	MOVE	#$0068,(A1)+
	MOVE	D0,(A1)+
	MOVE	CNT,(A1)+
	ADD	#4,CNT
	BRA.S	LABEL1
	
MOVE	MOVE	#$3140,(A1)+
	MOVE	CNT,(A1)+
RIEN	ADD	#4,CNT
	BRA.S	LABEL1

FINI	MOVE	#$4E75,(A1)+


	MOVE.L	$70.W,ANCVBL
	MOVE.L	#VBL,$70.W

LOOP	JMP	LOOP

VBL	MOVE	#$010,$FFFF8240.W
	LEA	$F8000,A0
	MOVE	#$FFFF,D0
	JSR	BUFFER
	MOVE	#$777,$FFFF8240.W
	CMPI.B	#$39,$FFFFFC02.W
	BEQ.S	FIN
	RTE
FIN	MOVE.L	ANCVBL,$70.W
	



;	MOVE	#$7,-(SP)
;	TRAP	#1
;	ADDQ.L	#2,SP
	
	CLR.L	-(SP)
	TRAP	#1


DATA	INCBIN	DISK.PI1

CNT	DS	1
ANCVBL	DS.L	1
BUFFER
	DS.B	32000