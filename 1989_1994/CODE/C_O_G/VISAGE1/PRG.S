	CLR.L	-(SP)
	MOVE	#$20,-(SP)
	TRAP	#1
	ADDQ.L	#6,SP
	
	CLR	-(SP)
	PEA	-1.W
	PEA	-1.W
	MOVE	#5,-(SP)
	TRAP	#14
	LEA	12(SP),SP
	
	MOVE.L	#BUF,D0
	CLR.B	D0
	MOVE.L	D0,SCREEN1
	ADD.L	#32000,D0
	MOVE.L	D0,SCREEN2
	MOVE.L	#PAL1,ADR_PAL1
	MOVE.L	#PAL2,ADR_PAL2
	
	MOVE.L	SCREEN1,A0
	LEA	PIC1+34,A2
	MOVE	#7999,D0
COP	MOVE.L	(A2)+,(A0)+
	DBF	D0,COP
	
	MOVE.L	#VBL,$70.W
J	BRA.S	J
	
VBL	
	move.l	SCREEN1,d0	
;	move.l	SCREEN2,SCREEN1		
;	move.l	d0,SCREEN2
	lsr.l	#8,d0		
	move.l	#$ffff8201,a0
	movep	d0,(a0)
	move.l	ADR_PAL1,A0	
	move.l	ADR_PAL2,ADR_PAL1		
	move.l	A0,ADR_PAL2

	MOVEM.L	(A0),D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
	SF	$FFFF825E.W
	
	RTE
	
PIC1	INCBIN	VISAGE1.PI1

PAL1	DC	$000,$777,$666,$666,$555,$555,$444,$444
	DC	$333,$333,$222,$222,$111,$111,$700,$700

PAL2	DC	$000,$777,$667,$666,$556,$555,$445,$444
	DC	$334,$333,$223,$222,$112,$111,$700,$700
	
	BSS
	DS.B	256
BUF	DS.B	64000
SCREEN1	DS.L	1
SCREEN2	DS.L	1
ADR_PAL1	DS.L	1
ADR_PAL2	DS.L	1
