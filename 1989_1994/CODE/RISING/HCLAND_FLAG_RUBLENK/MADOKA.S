	CLR.L	-(SP)
	MOVE	#$20,-(SP)
	TRAP	#1
	ADDQ.L	#6,SP
	
	CLR	-(SP)
	PEA	-1.W
	PEA	-1.W
	MOVE	#5,-(SP)
	TRAP	#14
	LEA	12(SP),SP

	CLR.L	$FFFF8240.W
	CLR.L	$FFFF8244.W
	CLR.L	$FFFF8248.W
	CLR.L	$FFFF824C.W
	CLR.L	$FFFF8250.W
	CLR.L	$FFFF8254.W
	CLR.L	$FFFF8258.W
	CLR.L	$FFFF825C.W

	MOVE.L	$44E.W,A0
	LEA	MADOKA+34,A1
	MOVE	#7999,D0
COPM	MOVE.L	(A1)+,(A0)+
	DBF	D0,COPM

	CLR.B	$FFFFFA07.W
	CLR.B	$FFFFFA09.W
	MOVE.L	#TBM,$120.W
	CLR.B	$FFFFFA1B.W
	BSET	#0,$FFFFFA07.W
	BSET	#0,$FFFFFA13.W
	
	MOVE.L	#VBLM,$70.W
MADW	BRA.S	MADW
WM	DC	0

TBM
;	CLR.B	$FFFFFA1B.W
;	MOVE.B	#1,$FFFFFA21.W
;	MOVE.B	#8,$FFFFFA1B.W
	MOVE.L	#$04000400,$FFFF8250.W
	MOVE.L	#$04000400,$FFFF8254.W
	MOVE.L	#$04000400,$FFFF8258.W
	MOVE.L	#$04000400,$FFFF825C.W
	BCLR	#0,$FFFFFA0F.W
	RTE			
CNTM	DC	0
VBLM
	CLR.B	$FFFFFA1B.W
	MOVE.B	#192,$FFFFFA21.W
	MOVE.B	#8,$FFFFFA1B.W
	MOVEM.L	DEG,D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
	ADDQ	#1,CNTM
	CMPI	#50*3,CNTM
	BLE.S	.NODEG2

	LEA	DEG,A0
MODDEGM	EQU	*+2
	LEA	0(A0),A0
	CMPI	#$9999,(A0)
	BEQ.S	.NODEG
	MOVEM.L	(A0),D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
	ADDQ	#1,WM
	CMPI	#3,WM
	BNE.S	.NODEG2
	CLR	WM
	ADD	#32,MODDEGM
	BRA.S	.NODEG2
.NODEG	MOVEM.L	PAL_OK,D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
.NODEG2
	TST	DEMO
	BNE.S	PART_TWO
	CMPI.L	#8,NB_PART
	BNE.S	.SUITV0
	BSR	TEST_LET
	CLR.L	NB_PART
.SUITV0	BSR	SCROLL
	BSR	SCROLL
	RTE
PART_TWO	MOVE.L	#VBLM2,$70.W
	RTE
VBLM2
	CLR.B	$FFFFFA1B.W
	LEA	PAL_OK,A0
MODDEGM2	EQU	*+2
	LEA	0(A0),A0
	CMPI	#$9999,32-2(A0)
	BEQ.S	.NODEG
	MOVEM.L	(A0),D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
	ADDQ	#1,WM
	CMPI	#3,WM
	BNE.S	.NODEG2
	CLR	WM
	SUB	#32,MODDEGM2
	BRA.S	.NODEG2
.NODEG	MOVEM.L	DEG,D0-D7
	MOVEM.L	D0-D7,$FFFF8240.W
.NODEG2
	RTE

SCROLL	MOVE.L	$44E.W,A0
	LEA	160*192+4(A0),A0
	LEA	BUF_LET,A1
	REPT	8
	ROXL	(A1)

	ROXL	154(A0)
	ROXL	146(A0)
	ROXL	138(A0)
	ROXL	130(A0)
	ROXL	122(A0)
	ROXL	114(A0)
	ROXL	106(A0)
	ROXL	98(A0)
	ROXL	90(A0)
	ROXL	82(A0)
	ROXL	74(A0)
	ROXL	66(A0)
	ROXL	58(A0)	
	ROXL	50(A0)
	ROXL	42(A0)
	ROXL	34(A0)
	ROXL	26(A0)
	ROXL	18(A0)
	ROXL	10(A0)
	ROXL	2(A0)
	LEA	160(A0),A0
	ADDQ.L	#2,A1
	ENDR
	ADDI.L	#1,NB_PART
	RTS
DEMO	DC	0
TEST_LET	MOVEQ	#0,D0
	LEA	TEXT1,A0	
	ADDA.L	POINT,A0
	LEA	FONT8_8,A1
	CMPI.B	#$FF,(A0)
	BNE	SUITTST
	CLR.L	POINT
	LEA	TEXT1,A0
	MOVE	#1,DEMO
SUITTST	MOVE.B	(A0),D0	
	SUBI.B	#32,D0	
	LSL.W	#3,D0	
	ADDA.L	D0,A1	
	LEA	BUF_LET,A2
	MOVE.B	(A1)+,(A2)
	MOVE.B	(A1)+,2(A2)
	MOVE.B	(A1)+,4(A2)
	MOVE.B	(A1)+,6(A2)
	MOVE.B	(A1)+,8(A2)
	MOVE.B	(A1)+,10(A2)
	MOVE.B	(A1)+,12(A2)
	MOVE.B	(A1)+,14(A2)
	ADDI.L	#1,POINT
	RTS
	
TEXT1
 DC.B "AGAIN... LEGENDARY WOMAN RETURNS!    "
 DC.B "  ...MADOKA!               "
 DC.B " IF YOU HAVE OUR FIRST DEMO, 'CHOICE OF GODS', YOU ALREADY KNOW HER!"
 DC.B "  IF NOT... GO AND GET IT NOW!           "
 DC.B "    WELOVEMADOKAWELOVEMADOKAWELOVEMADOKAWE...OOPS!   AGAIN ONE OF THOSE LETHAL CEREBRAL SIDE-SLIPS! "
 DC.B "         ...MADOKA LOVERS RULEZ!                                      "
 DC.B "             "
	DC.B $FF
	EVEN
FONT8_8	
;FONTS_1
	DC.B	0,0,0,0,0,0,0,0
	DC.B 24,24,48,48,0,96,96,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B 24,24,48,0,0,0,0,0
	DC.B 24,56,48,48,48,56,24,0
	DC.B 48,56,24,24,24,56,48,0
	DC.B 18,84,56,254,56,84,144,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B 0,0,0,0,48,48,96,0
	DC.B 0,0,0,126,126,0,0,0
	DC.B 0,0,0,0,0,48,48,0
	DC.B 254,0,252,0,248,0,240,0
	DC.B 124,198,206,214,230,198,124,0
	DC.B 24,56,56,24,24,60,60,0
	DC.B 60,94,102,12,24,54,126,0
	DC.B 126,126,6,28,6,126,124,0
	DC.B 28,60,108,204,254,254,12,0
	DC.B 126,126,64,124,6,126,124,0
	DC.B 60,102,96,124,102,102,60,0
	DC.B 126,118,76,12,24,24,24,0
	DC.B 60,102,102,60,102,102,60,0
	DC.B 60,102,102,62,6,6,60,0
	DC.B 0,0,48,48,0,48,48,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	0,0,0,0,0,0,0,0
	DC.B	60,102,102,12,0,24,24,0
	DC.B	0,0,0,0,0,0,0,0

	DC.B	124,230,230,254,230,230,230,0	;A
	DC.B	252,230,230,252,230,230,252,0	;B
	DC.B	124,230,224,224,224,230,124,0	;C
	DC.B	252,230,230,230,230,230,252,0	;D
	DC.B	254,224,224,248,224,224,254,0	;E
	DC.B	254,224,224,248,224,224,224,0	;F
	DC.B	124,230,224,224,238,230,124,0	;G
	DC.B	230,230,230,254,230,230,230,0	;H
	DC.B	124,56,56,56,56,56,124,0	;I
	DC.B	14,14,14,14,14,206,124,0	;J
	DC.B	230,238,252,248,252,238,230,0	;K
	DC.B	224,224,224,224,224,224,254,0	;L
	DC.B	198,238,246,230,230,230,230,0	;M
	DC.B	252,230,230,230,230,230,230,0	;N
	DC.B	124,230,230,230,230,230,124,0	;O
	DC.B	252,230,230,252,224,224,224,0	;P
	DC.B	121,230,230,230,238,252,118,0	;Q
	DC.B	252,230,230,252,236,230,230,0	;R
	DC.B	124,230,224,124,14,206,124,0	;S
	DC.B	254,56,56,56,56,56,56,0	;T
	DC.B	230,230,230,230,230,230,124,0	;U
	DC.B	230,230,230,230,230,124,56,0	;V
	DC.B	230,230,230,230,254,238,198,0	;W
	DC.B	198,238,124,56,124,238,198,0	;X
	DC.B	230,230,230,124,56,56,56,0	;Y
	DC.B	254,206,28,56,112,230,254,0	;Z

	DC	$9999
DEG
	DCB	16,0

	DC	$000,$100,$111,$100,$000,$000,$000,$000
	DC	$000,$000,$100,$100,$010,$000,$000,$000

	DC	$000,$210,$222,$200,$000,$100,$000,$100
	DC	$000,$000,$200,$200,$020,$001,$000,$001

	DC	$000,$321,$333,$310,$000,$200,$100,$200
	DC	$000,$000,$300,$300,$030,$012,$000,$002

	DC	$000,$432,$444,$421,$000,$310,$200,$300
	DC	$000,$100,$400,$401,$040,$023,$001,$003

	DC	$000,$543,$555,$532,$000,$421,$310,$400
	DC	$000,$200,$501,$512,$050,$134,$002,$004

	DC	$000,$654,$666,$643,$100,$532,$421,$501
	DC	$100,$310,$612,$623,$060,$245,$003,$015

PAL_OK	DC	$000,$765,$777,$754,$201,$643,$532,$612
	DC	$210,$421,$723,$734,$070,$356,$004,$126

	DC	$9999

NB_PART	DC.L	8
MADOKA	INCBIN	MADOKA_4.PI1
	BSS
POINT	DS.L	1
BUF_LET	DS.B	(1*8)*2
