
MAIN	CLR.L	-(SP)
	MOVE.W	#$20,-(SP)
	TRAP	#1
	ADDQ.W	#6,SP

	CLR.W	-(SP)
	PEA	-1.W
	PEA	-1.W
	MOVE.W	#5,-(SP)
	TRAP	#14
	LEA	12(SP),SP

	move.l	#FIN,$008.W
	move.l	#FIN,$010.W
	move.l	#FIN,$01C.W
	move.l	#FIN,$014.W

	MOVE.L	#VBL,$70.W

VSYNC	TST	NB_VBL
	BEQ.S	VSYNC
	CLR	NB_VBL
	
	MOVE.L	$44E.W,A0
	LEA	GFX+8000-40,A1
MOD_M	EQU	*+2
	MOVE	#1-1,D0
	MOVE	D0,D1
	MULU	#160,D1
	ADD	D1,A0
	
AF
N	SET	0
	REPT	12
	MOVE	(A1)+,N(A0)
N	SET	N+8
	ENDR
	LEA	-160(A0),A0
	LEA	-12*2-40(A1),A1
	DBF	D0,AF
	
	CMPI	#199,MOD_M
	BEQ.S	.A
	ADDQ	#1,MOD_M
.A	BRA	VSYNC
	
	
FIN	MOVE.L	$4.W,A0
	JMP	(A0)
VBL	ADDQ	#1,NB_VBL
	RTE
NB_VBL	DC	0


GFX	INCBIN	MSG.GFX